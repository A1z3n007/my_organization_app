# Neon CRM (my_organization_app)

Neon CRM — облегчённое офлайн-CRM для персонального менеджмента сделок, задач и клиентской базы. Приложение собрано на Flutter, работает полностью локально (данные сохраняются в `SharedPreferences`) и помогает быстро фиксировать заметки, встречи и этапы воронки без развёртывания серверной части.

## Основные возможности
- **Авторизация без сервера.** Пользователь регистрируется локально, данные аккаунта и сессия восстанавливаются при следующем запуске.
- **Обзорная панель.** Первая вкладка показывает приветствие, быстрые действия (создание заметки, задачи, сделки), ключевые метрики и горячие сделки.
- **Заметки.** Легковесный блокнот с отображением даты создания и поддержкой Markdown-подобного форматирования (через обычный текст).
- **Задачи.** Планы с дедлайнами, приоритетами (низкий/средний/высокий) и чекбоксами для контроля выполнения.
- **Клиенты.** Карточки с именем, компанией, телефоном, email и текущим статусом взаимоотношений.
- **Сделки.** Канбан по стадиям воронки (контакт -> запрос -> презентация -> переговоры -> успешно). Суммы агрегируются по колонкам, стадии можно менять прямо из карточки.
- **Тёмная неоновая тема.** Общий стиль задаётся через `ColorScheme.fromSeed`, UI адаптирован под Material 3.

## Технологический стек
| Технология | Назначение |
|------------|-----------|
| Flutter (Material 3) | UI, навигация и responsive-верстка |
| Dart 3.10+ | Логика приложения |
| `shared_preferences` | Персистентное локальное хранилище (`mini_crm_state`) |
| `ChangeNotifier` + `AnimatedBuilder` | Управление состоянием (`AppState`) |

## Быстрый старт для локальной разработки
1. **Установите инструменты.** Нужен Flutter >= 3.24 (Dart >= 3.10) и любой эмулятор/устройство.
2. **Склонируйте проект.**
   ```bash
   git clone https://github.com/<user>/my_organization_app.git
   cd my_organization_app
   ```
3. **Получите зависимости.**
   ```bash
   flutter pub get
   ```
4. **Запустите приложение.**
   ```bash
   flutter run
   ```
   Дальше выберите устройство (Chrome, iOS, Android, Windows и т.д.) и дождитесь билда.

## Как работать в приложении
1. **Регистрация / вход.** На стартовом экране можно создать нового пользователя (имя + email + пароль >= 4 символов) или войти в существующий аккаунт. После регистрации аккаунт автоматически получает демо-заметки, задачи, клиентов и сделки, чтобы интерфейс не был пустым.
2. **Навигация по вкладкам.**
   - `Обзор` — быстрые действия, метрики, последние заметки и «горящие» сделки.
   - `Заметки` — список всех записей; кнопка «Добавить» открывает модальное окно с формой.
   - `Задачи` — сортировка по дедлайнам, переключатель статуса, формы с датой и приоритетом.
   - `Клиенты` — карточки контактов с круглыми аватарами и бейджем стадии.
   - `Сделки` — группировка по стадиям воронки; сумма по колонке и меню смены статуса.
3. **Модальные формы.** Все операции создания выполняются через диалоги из `lib/screens/forms/crm_forms.dart`. Формы валидируют обязательные поля и преобразуют введённые значения (например, сумму сделки в `double`).
4. **Выход и переключение аккаунта.** В правом верхнем углу дэшборда есть кнопка выхода. После Logout приложение вернётся на экран авторизации.

## Структура проекта
```
lib/
|-- main.dart                   # Точка входа, инициализация SharedPreferences и AppState
|-- state/app_state.dart        # Единый источник данных (пользователи, заметки, задачи, клиенты, сделки)
|-- screens/
|   |-- auth/auth_screen.dart   # Экран входа/регистрации
|   |-- dashboard/              # Вкладки: overview, notes, tasks, clients, deals
|   `-- forms/crm_forms.dart    # Модальные формы создания сущностей
|-- utils/date_formatter.dart   # Форматирование дат под русский язык
`-- widgets/empty_state.dart    # Универсальный блочный плейсхолдер
```

## Хранение данных и состояние
- `AppState` наследует `ChangeNotifier`, поэтому все вкладки подписываются на изменения через `AnimatedBuilder`.
- Все сущности (пользователи, заметки, задачи, клиенты, сделки) сериализуются в JSON и пишутся в `SharedPreferences` под ключом `mini_crm_state`.
- После авторизации состояние восстанавливается из локального хранилища, поэтому приложение продолжает работу без сети.

## Полезные команды
- `flutter format lib` — автоформатирование.
- `flutter analyze` — статический анализ кода.
- `flutter test` — запуск модульных тестов (каталог `test/`).
- `flutter build apk` или `flutter build web` — сборка релизного артефакта для мобильных/веб.

## Сброс локальных данных
- **Мобильные платформы:** удалите приложение с устройства/эмулятора или очистите данные в настройках ОС.
- **Web:** в консоли браузера вызовите `localStorage.removeItem('mini_crm_state')`.
- **Desktop:** удалите файлы SharedPreferences (flutter хранит их в папке приложения) или выполните `flutter clean` и перезапустите.

## Дальнейшее развитие
- Подключить настоящий backend/API и синхронизацию между устройствами.
- Добавить push-уведомления о дедлайнах задач и сделок.
- Реализовать редактирование и удаление сущностей, а также простую аналитику (воронка, графики).
